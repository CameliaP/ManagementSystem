@using ManagementSystem.Web.ViewModels
@model TaskViewModel

@{
    ViewBag.Title = "Details";
}

<h1>Task @Model.Id Details</h1>

<div class="list-group-item task-details-list">
    <p>
        <strong>Description: </strong> @Model.Description
    </p>
    <hr />
    <p>
        Status: @Model.Status
    </p>
    <hr />
    <p>
        Type: @Model.Type
    </p>
    <hr />
    <p>
        Created on: @Model.CreatedOnDate.ToString("dd.MM.yyyy")
    </p>
    <hr />
    <p>
        Required by: @Model.RequiredByDate.ToString("dd.MM.yyyy")
    </p>
    <hr />
    <p>
        Next action on: @Model.NextActionDate
    </p>
    <hr />
    <div>
        Responsible employees:
        @if (Model.AssignedToUsers.Count == 0)
        {
            <p>None</p>
        }
        else
        {
            foreach (var user in Model.AssignedToUsers)
            {
                <p>
                    @user.UserName
                </p>
            }
        }
    </div>
</div>
<br />
<div class="panel panel-tasks p0">
    @if (@Model.Comments.Count() == 0)
    {
        <div class="panel-heading panel-heading-add text-warning" id="comments-label">
            There are no comments
        </div>
        <div class="panel panel-body panel-comments-content" id="panel-comments-content">
            <div id="all-comments"></div>

        </div>
    }
    else
    {
        <div class="panel panel-body panel-comments-content" id="panel-comments-content">
            <div id="all-comments">
                @foreach (var comment in @Model.Comments)
                {
                    @Html.Partial("_CommentPartialView", comment)
                }
            </div>
        </div>
    }
</div>
<br />
@if (User.Identity.IsAuthenticated)
{
    @Html.Partial("~/Views/Shared/_AddComment.cshtml", new CommentViewModel(Model.Id))
}



